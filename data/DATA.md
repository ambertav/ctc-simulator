# Data Directory Overview

The `data/` folder contains all input files used by the Centralized Traffic Control Simulator to model the transit systems. This includes transit schedules, station metadata, and routing information. The `data/` folder also holds the schedule files generated by the [`Scheduler`](/docs/scheduler.md) during simulation runtime.

## Files and Directories

### gtfs_subway/
- Description: contains original GTFS files downloaded from MTA.
- Notes: these files are parsed by the [`Subway`](/docs/subway.md) or preprocessing scripts.
- Source: [Static GTFS Data](https://www.mta.info/developers)

#### gtfs_subway/trips.txt
- Format: TXT
- Description: organizes all trips for weekday, saturday, and sunday with a cooresponding route id, or train line, trip id, and trip headsign
- Usage: parsed by the [`Subway`](/docs/subway.md) to collect metadata on the trip id when connecting nodes and constructing the full `Route`.

#### gtfs_subway/stop_times.txt
- Format: TXT
- Description: groups stop sequence along a specified trip id
- Usage: parsed by the [`Subway`](/docs/subway.md) to connect the nodes and construct a `std::vector` of `Route` by trip headsign

### mta_subway_stations.csv

- Format: CSV
- Description: organizes subway stations by complex_id and lists all cooresponding GTFS ids, which helps prevent duplicate nodes.
- Usage: parsed by the [`Subway`](/docs/subway.md) to create nodes for transit graph.
- Source: [MTA NYC Subway Stations](https://data.ny.gov/Transportation/MTA-Subway-Stations/39hk-dx4f/about_data) 

### schedule.csv

- Format: CSV
- Description: output file for the schedule generated by the [`Scheduler`](/docs/scheduler.md).
- Usage: parsed by [`Dispatch`](/docs/dispatch.md) to manage the simulation.

## Preprocessing

The simulator currently parses reaw GTFS files on each run to construct the transit maps, which can incur overhead. A preprocessing pipeline is planned to extract and index data relevant to the simulation to speed up initialization.

## Usage

The data files are loaded at runtime by various modules:

- [`Subway`](/docs/subway.md) reads station and connection files to build the transit graph.
- [`Scheduler`](/docs/scheduler.md) writes to a CSV file the schedule generated according to the transit graph.
- [`Dispatch`](/docs/dispatch.md) reads the generated schedule CSV file to run the simulation.